<!doctype HTML>
<html lang='en' id='MAINFRAME'>
    <head>
		<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
		<!--Bootstrap CSS-->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
		<!--Title-->
		<title id='titleBar'>MHSN_DAY_DATA</title>
		
    </head>

    <body>
        <center><header id='dayTypeSchedual'>{{ today_is }}</header></center>
        
		
		<center><h1 id='block'></h1></center>

		<center><h2 id='session_time'></h2></center> 


		<h4 id='weatherHeader'>Weather</h4>
			<ul>
            	<li id='conditionsValue'>Today it will be {{ conditions }}</li>
            	<li id='currentTemperatureValue'>Currently: {{ temperature }} </li>
				<li id='highLowTemperatureValue'>{{high_low}}</li>
        	</ul>

		<img src={{url_for('static', filename='images/mhsn_logo.jpg')}} align='right' width='10%' height="10%" id='mhsnLogo'>
	
		<!--Bootstrap Javascript Bundle Dependency-->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
	
		<!--Scripts pertaining to HTML elements on the page-->
		<script>
			function updootTime() { //Updates static page time by current time
				var dt = new Date();
				var milliseconds = 147000;
				dt.setMinutes(dt.getMinutes() + 2); //School clock is ~2:15 mins ahead
				dt.setSeconds(dt.getSeconds() + 15);//School clock is ~2:15 mins ahead
				document.getElementById("session_time").innerHTML = dt.toLocaleString();
			}

			function updootBlock() {
				dt = new Date();
				dt.setMinutes(dt.getMinutes() + 2); //School clock is ~2:15 mins ahead
				dt.setSeconds(dt.getSeconds() + 15);
				hour = dt.getHours();
				minute = dt.getMinutes();
				current = new Date('December 1, 2000 ' + hour + ':' + minute);
				
				const block_times = {
					'1' : {
						'start' : new Date('December 1, 2000 7:25').getTime(),
						'end' : new Date('December 1, 2000 8:45').getTime(),
						'name' : 'Block 1',
					},
					
					'2' : {
						'start' : new Date('December 1, 2000 8:46').getTime(),
						'end' : new Date('December 1, 2000 10:10').getTime(),
						'name' : 'Block 2',
					},
					
					'3' : {
						'start' : new Date('December 1, 2000 10:11').getTime(),
						'end' : new Date('December 1, 2000 10:41').getTime(),
						'name' : 'Block 3',
					},

					
					'4' : {
						'start' : new Date('December 1, 2000 10:42').getTime(), // change back to 10:46
						'end' : new Date('December 1, 2000 11:12').getTime(),
						'name' : 'Block 4',
					},
					
					'5' : {
						'start' : new Date('December 1, 2000 11:13').getTime(),
						'end' : new Date('December 1, 2000 12:37').getTime(),
						'name' : 'Block 5',
					},
					
					'6' : {
						'start' : new Date('December 1, 2000 12:38').getTime(),
						'end' : new Date('December 1, 2000 14:02').getTime(),
						'name' : 'Block 6',
					}
				}

				for(let times in block_times) {
					times = block_times[times]
					
					if(times['start'] < current.getTime() && times['end'] > current.getTime()) {
						document.getElementById('block').innerHTML = times['name'];
						break
					} else if(times['start'] > current.getTime()) {
						document.getElementById('block').innerHTML = 'School has not started yet!';
					} else if(times['end'] > current.getTime()) {
						doctype.getElementById('bloc').innerHTML = 'School has ended!'
					}

				}

				}

			setInterval(function() { // Updates the time every second and returns hour minute values for block updates
				updootBlock();
				updootTime();
			}, 1000); //Every 1000 ms is a second
		</script>
    
	</body>
</html>
